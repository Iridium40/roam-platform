<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ROAM Admin</title>
    <link
      rel="icon"
      type="image/png"
      href="https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2Fb172606121df48b6b4a9ce126413379f?format=webp&width=32"
      id="favicon"
    />
    <link
      rel="apple-touch-icon"
      href="https://cdn.builder.io/api/v1/image/assets%2Fa42b6f9ec53e4654a92af75aad56d14f%2Fb172606121df48b6b4a9ce126413379f?format=webp&width=180"
      id="apple-touch-icon"
    />
    <script>
      // Dynamic favicon loading from system settings
      window.addEventListener("DOMContentLoaded", async function () {
        try {
          // This will be replaced by the actual Supabase configuration
          const response = await fetch("/api/system-config?keys=site_favicon");
          if (response.ok) {
            const config = await response.json();
            const faviconConfig = config.find(
              (c) => c.config_key === "site_favicon",
            );

            if (faviconConfig && faviconConfig.config_value) {
              const favicon = document.getElementById("favicon");
              const appleTouchIcon =
                document.getElementById("apple-touch-icon");

              if (favicon) favicon.href = faviconConfig.config_value;
              if (appleTouchIcon)
                appleTouchIcon.href = faviconConfig.config_value;
            }
          }
        } catch (error) {
          console.log("Using default favicon - system config not available");
        }
      });
    </script>
  </head>

  <body>
    <div id="root"></div>

    <script type="module" src="/client/App.tsx"></script>
  </body>
</html>
